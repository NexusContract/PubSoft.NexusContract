# 统一收单交易支付接口

## 功能说明

**接口名称**：`alipay.trade.pay`

收银员使用扫码设备读取用户手机支付宝“付款码”获取设备（如扫码枪）读取用户手机支付宝的付款码信息后，将二维码或条码信息通过本接口上送至支付宝发起支付。

## 请求

- **URL**：`/v3/alipay/trade/pay`
- **Method**：`POST`
- **Content-Type**：`application/json`

### 请求参数

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| advance_payment_type | string | 否 | 支付模式类型,若值为ENJOY_PAY_V2表示当前交易允许走先享后付2.0垫资 | `ENJOY_PAY_V2` |
| agreement_params.agreement_no | string | 否 | 支付宝系统中用以唯一标识用户签约记录的编号（用户签约成功后的协议号 ） | `20170322450983769228` |
| agreement_params.apply_token | string | 否 | 鉴权申请token，其格式和内容，由支付宝定义。在需要做支付鉴权校验时，该参数不能为空。 | `MDEDUCT0068292ca377d1d44b65fa24ec9cd89132f` |
| agreement_params.auth_confirm_no | string | 否 | 鉴权确认码，在需要做支付鉴权校验时，该参数不能为空 | `423979` |
| agreement_params.deduct_permission | string | 否 | 商户代扣扣款许可 | `2021571176714791277815457854545` |
| alipay_store_id | string | 否 | 支付宝店铺编号。	指商户创建门店后支付宝生成的门店ID。 | `2016041400077000000003314986` |
| auth_code | string | 否 | 支付授权码。	当面付场景传买家的付款码（25~30开头的长度为16~24位的数字，实际字符串长度以开发者获取的付款码长度为准）或者刷脸标识串（fp开头的35位字符串）；	周期扣款或代扣场景无需传入，协议号通过agreement_params参数传递； 	支付宝预授权和新当面资金授权场景无需传入，授权订单号通过 auth_no字段传入。	注：交易的买家与卖家不能相同。 | `28763443825664394` |
| auth_confirm_mode | string | 否 | 预授权确认模式。	适用于支付宝预授权和新当面资金授权场景。枚举值：	COMPLETE：转交易完成后解冻剩余冻结金额；	NOT_COMPLETE：转交易完成后不解冻剩余冻结金额；	默认值为NOT_COMPLETE。 | `COMPLETE` |
| auth_no | string | 否 | 资金预授权单号。	支付宝预授权和新当面资金授权场景下必填。 | `2016110310002001760201905725` |
| bkagent_req_info.acq_code | string | 否 | 收单机构在清算组织登记或分配的机构代码 | `` |
| bkagent_req_info.device_type | string | 否 | 终端设备类型，受理方可参考终端注册时的设备类型填写。 | `` |
| bkagent_req_info.location | string | 否 | 终端设备实时经纬度信息，格式为纬度/经度，+表示北纬、东经，-表示南纬、西经。 | `` |
| bkagent_req_info.merch_code | string | 否 | 收单机构在清算组织登记的商户编码 | `` |
| bkagent_req_info.serial_num | string | 否 | 终端类型填写为 02、	03、04、05、06、08、09 或 10 时，必	须填写终端序列号。 | `` |
| body | string | 否 | 订单附加信息。	如果请求时传递了该参数，将在异步通知、对账单中原样返回，同时会在商户和用户的pc账单详情中作为交易描述展示 | `Iphone6 16G` |
| business_params.actual_order_time | string | 否 | 实际订单时间，在乘车码场景，传入的是用户刷码乘车时间 | `` |
| business_params.buyer_memo | string | 否 | 买家备注信息 | `` |
| business_params.campus_card | string | 否 | 校园卡编号 | `` |
| business_params.card_type | string | 否 | 虚拟卡卡类型 | `` |
| business_params.enterprise_pay_amount | string | 否 | 因公付金额，单位：元。 | `` |
| business_params.enterprise_pay_info | string | 否 | 因公付业务信息 | `` |
| business_params.force_pwd | string | 否 | 收银台强制密码核身参数，实际收银侧会根据这个参数为true并结合业务场景来判断是否密码核身 | `` |
| business_params.good_taxes | string | 否 | 商户传入的交易税费。需要落地风控使用 | `` |
| business_params.mc_create_trade_ip | string | 否 | 商户端创建订单的 IP，须上传正确的用户端外网 IP，支持 ipv4/ipv6 格式；	mc_create_trade_ip和mcCreateTradeIp（旧）参数描述相同，首选mc_create_trade_ip入参，请勿重复入参；	如已入参mcCreateTradeIp（旧），无需新增入参mc_create_trade_ip。 | `` |
| business_params.priority_unfreeze_asset | string | 否 | 信用预授权转交易阶段，优先解冻的用户资产	CREDIT_ASSET：信用资产	COMMON_ASSET：自有资金资产	默认优先解冻资金资产 | `` |
| business_params.tiny_app_merchant_biz_type | string | 否 | 当需要在 商家平台（b.alipay.com）—数据中心 中查看对应业务场景下的数据明细可以通过该参数传入	支持传入的值：<a target="_blank" href="https://opendocs.alipay.com/mini/08by8k?pathHash=96e03412">小程序细分业务场景</a> | `` |
| buyer_id | string | 否 | 买家支付宝用户ID。	支付宝预授权和新当面资金授权场景下必填，其它场景不需要传入。 | `2088202954065786` |
| buyer_open_id | string | 否 | 买家支付宝用户唯一标识 | `074a1CcTG1LelxKe4xQC0zgNdId0nxi95b5lsNpazWYoCo5` |
| disable_pay_channels | string | 否 | 禁用支付渠道。	多个渠道以逗号分割，如同时禁用信用支付类型和积分，则传入："credit_group,point"。	支持传入的值：<a target="_blank" href="https://docs.open.alipay.com/common/wifww7">渠道列表</a> | `credit_group` |
| discountable_amount | string | 否 | 可打折金额。	参与优惠计算的金额，单位为元，精确到小数点后两位，取值范围[0.01,100000000]。 	如果同时传入了【可打折金额】、【不可打折金额】和【订单总金额】，则必须满足如下条件：【订单总金额】=【可打折金额】+【不可打折金额】。	如果订单金额全部参与优惠计算，则【可打折金额】和【不可打折金额】都无需传入。 | `80.00` |
| ext_user_info.cert_no | string | 否 | 买家证件号。	注：need_check_info=T或fix_buyer=T时该参数才有效，支付宝会比较买家在支付宝留存的证件号码与该参数传入的值是否匹配。 | `` |
| ext_user_info.cert_type | string | 否 | 指定买家证件类型。	枚举值：	IDENTITY_CARD：身份证；	PASSPORT：护照；	OFFICER_CARD：军官证；	SOLDIER_CARD：士兵证；	HOKOU：户口本；	PERMANENT_RESIDENCE_FOREIGNER：外国人永久居留身份证。	如有其它类型需要支持，请与蚂蚁金服工作人员联系。	注： need_check_info=T或fix_buyer=T时该参数才有效，支付宝会比较买家在支付宝留存的证件类型与该参数传入的值是否匹配。 | `` |
| ext_user_info.fix_buyer | string | 否 | 是否强制校验买家身份。	需要强制校验传：T;	不需要强制校验传：F或者不传；	当传T时，接口上必须指定cert_type、cert_no和name信息且支付宝会校验传入的信息跟支付买家的信息都匹配，否则报错。	默认为不校验。 | `` |
| ext_user_info.identity_hash | string | 否 | 买家加密身份信息。当指定了此参数且指定need_check_info=T时，支付宝会对买家身份进行校验，校验逻辑为买家姓名、买家证件号拼接后的字符串，以sha256算法utf-8编码计算hash，若与传入的值不匹配则会拦截本次支付。注意：如果同时指定了用户明文身份信息（name，cert_type，cert_no中任意一个），则忽略identity_hash以明文参数校验。 | `` |
| ext_user_info.min_age | string | 否 | 允许的最小买家年龄。	买家年龄必须大于等于所传数值 	注：	1. need_check_info=T时该参数才有效	2. min_age为整数，必须大于等于0 | `` |
| ext_user_info.mobile | string | 否 | 指定买家手机号。	注：该参数暂不校验 | `` |
| ext_user_info.name | string | 否 | 指定买家姓名。	注： need_check_info=T或fix_buyer=T时该参数才有效 | `` |
| ext_user_info.need_check_info | string | 否 | 是否强制校验买家信息；	需要强制校验传：T;	不需要强制校验传：F或者不传；	当传T时，支付宝会校验支付买家的信息与接口上传递的cert_type、cert_no、name或age是否匹配，只有接口传递了信息才会进行对应项的校验；只要有任何一项信息校验不匹配交易都会失败。如果传递了need_check_info，但是没有传任何校验项，则不进行任何校验。	默认为不校验。 | `` |
| extend_params.card_type | string | 否 | 卡类型 | `` |
| extend_params.credit_ext_info | string | 否 | 信用参数，可选，如有需要请与芝麻约定后传入，信用服务说明见 | `` |
| extend_params.hb_fq_num | string | 否 | 使用花呗分期要进行的分期数 | `` |
| extend_params.hb_fq_seller_percent | string | 否 | 使用花呗分期需要卖家承担的手续费比例的百分值，传入100代表100% | `` |
| extend_params.industry_reflux_info | string | 否 | 行业数据回流信息, 详见：地铁支付接口参数补充说明 | `` |
| extend_params.royalty_freeze | string | 否 | 是否进行资金冻结，用于后续分账，true表示资金冻结，false或不传表示资金不冻结 | `` |
| extend_params.specified_seller_name | string | 否 | 特殊场景下，允许商户指定交易展示的卖家名称 | `` |
| extend_params.sys_service_provider_id | string | 否 | 系统商编号	该参数作为系统商返佣数据提取的依据，请填写系统商签约协议的PID | `` |
| extend_params.tc_installment_order_id | string | 否 | 公域商品交易分期单ID，小程序交易组件订单特殊场景使用，请传入 订单分期接口(alipay.open.mini.order.installment.create)中返回的installment_order_id | `` |
| extend_params.trade_component_order_id | string | 否 | 公域商品交易业务订单ID | `` |
| goods_detail | array | 否 | 订单包含的商品列表信息，json格式。 | `` |
| is_async_pay | boolean | 否 | 是否异步支付，传入true时，表明本次期望走异步支付，会先将支付请求受理下来，再异步推进。商户可以通过交易的异步通知或者轮询交易的状态来确定最终的交易结果。	只在代扣场景下有效，其它场景无需传入。 | `false` |
| merchant_order_no | string | 否 | 商户的原始订单号 | `201008123456789` |
| notify_url | string | 否 | 通知地址 | `` |
| operator_id | string | 否 | 商户操作员编号。 | `yx_001` |
| out_trade_no | string | 否 | 商户订单号。	由商家自定义，64个字符以内，仅支持字母、数字、下划线且需保证在商户端不重复。 | `20150320010101001` |
| passback_params | string | 否 | 公用回传参数。	如果请求时传递了该参数，支付宝会在异步通知时将该参数原样返回。 | `merchantBizType%3d3C%26merchantBizNo%3d2016010101111` |
| pay_params.async_type | string | 否 | 普通异步支付, 传入该参数时，如果满足受理条件，会先同步受理支付，然后在异步调度推进支付		NORMAL_ASYNC: 普通异步，受理成功之后，会在交易关单之前通过一定的策略重试		NEAR_REAL_TIME_ASYNC: 准实时异步，受理成功之后，会准实时发起1次调度 | `NORMAL_ASYNC` |
| pay_params.retry_type | string | 否 | 重试类型，当async_type传入NORMAL_ASYNC时，可以设置该参数，选择是否要重试，retry_type 可选，不设置时，可重试。	● NONE_AND_CLOSETRADE：不重试，支付请求只会被执行1次，执行完成后如果交易未成功，会关闭交易	● NONE：不重试，支付请求只会被执行1次，执行完成后，不做任何处理。交易到达了timeout_express指定的时间后，关闭交易。	● RETY: 重试，支付请求在超时关单前，会按照策略重试 | `NONE` |
| product_code | string | 否 | 产品码。 商家和支付宝签约的产品码。 枚举值（点击查看签约情况）： <a target="_blank" href="https://opensupport.alipay.com/support/codelab/detail/486/487">FACE_TO_FACE_PAYMENT</a>：当面付产品； <a target="_blank" href="https://opensupport.alipay.com/support/codelab/detail/807/1419">CYCLE_PAY_AUTH</a>：周期扣款产品； GENERAL_WITHHOLDING：代扣产品； <a target="_blank" href="https://opensupport.alipay.com/support/codelab/detail/712/1471">PRE_AUTH_ONLINE</a>：支付宝预授权产品； PRE_AUTH：新当面资金授权产品； 默认值为FACE_TO_FACE_PAYMENT。 注意：非当面付产品使用本接口时，本参数必填。请传入对应产品码。 | `FACE_TO_FACE_PAYMENT` |
| promo_params.actual_order_time | string | 否 | 存在延迟扣款这一类的场景，用这个时间表明用户发生交易的时间，比如说，在公交地铁场景，用户刷码出站的时间，和商户上送交易的时间是不一样的。 | `2018-09-25 22:47:33` |
| query_options | array | 否 | 返回参数选项。	商户通过传递该参数来定制同步需要额外返回的信息字段，数组格式。包括但不限于：["fund_bill_list","voucher_detail_list","enterprise_pay_info","discount_goods_detail","discount_amount","mdiscount_amount"] | `["voucher_detail_list"]` |
| request_org_pid | string | 否 | 收单机构(例如银行）的标识，填写该机构在支付宝的pid。只在机构间联场景下传递该值。 | `2088201916734621` |
| royalty_info.royalty_detail_infos | array | 否 | 分账明细的信息，可以描述多条分账指令，json数组。 | `` |
| royalty_info.royalty_type | string | 否 | 分账类型	卖家的分账类型，目前只支持传入ROYALTY（普通分账类型）。 | `` |
| scene | string | 否 | 支付场景。枚举值：	bar_code：当面付条码支付场景；	security_code：当面付刷脸支付场景，对应的auth_code为fp开头的刷脸标识串；	周期扣款或代扣场景无需传入，协议号通过agreement_params参数传递； 	支付宝预授权和新当面资金授权场景无需传入，授权订单号通过 auth_no字段传入。	默认值为bar_code。 | `bar_code` |
| seller_id | string | 否 | 卖家支付宝用户ID。	当需要指定收款账号时，通过该参数传入，如果该值为空，则默认为商户签约账号对应的支付宝用户ID。	收款账号优先级规则：门店绑定的收款账户>请求传入的seller_id>商户签约账号对应的支付宝用户ID；	注：直付通和机构间联场景下seller_id无需传入或者保持跟pid一致；	如果传入的seller_id与pid不一致，需要联系支付宝小二配置收款关系；	支付宝预授权和新当面资金授权场景下必填。 | `2088102146225135` |
| settle_currency | string | 否 | 商户指定的结算币种，支持英镑：GBP、港币：HKD、美元：USD、新加坡元：SGD、日元：JPY、加拿大元：CAD、澳元：AUD、欧元：EUR、新西兰元：NZD、韩元：KRW、泰铢：THB、瑞士法郎：CHF、瑞典克朗：SEK、丹麦克朗：DKK、挪威克朗：NOK、马来西亚林吉特：MYR、印尼卢比：IDR、菲律宾比索：PHP、毛里求斯卢比：MUR、以色列新谢克尔：ILS、斯里兰卡卢比：LKR、俄罗斯卢布：RUB、阿联酋迪拉姆：AED、捷克克朗：CZK、南非兰特：ZAR、人民币：CNY | `USD` |
| settle_info.settle_detail_infos | array | 否 | 结算详细信息，json数组，目前只支持一条。 | `` |
| settle_info.settle_period_time | string | 否 | 该笔订单的超期自动确认结算时间，到达期限后，将自动确认结算。此字段只在签约账期结算模式时有效。取值范围：1d～365d。d-天。 该参数数值不接受小数点。 | `` |
| store_id | string | 否 | 商户门店编号。	指商户创建门店时输入的门店编号。 | `NJ_001` |
| sub_merchant.merchant_id | string | 否 | 支付宝二级商户编号。	间连受理商户的支付宝商户编号，通过间连商户入驻接口后由支付宝生成。	直付通和机构间连业务场景下必传。 | `` |
| sub_merchant.merchant_type | string | 否 | 二级商户编号类型。	枚举值：	alipay:支付宝分配的间联商户编号；	目前仅支持alipay，默认可以不传。 | `` |
| subject | string | 否 | 订单标题。	注意：不可使用特殊字符，如 /，=，& 等。 | `Iphone6 16G` |
| terminal_id | string | 否 | 商户机具终端编号。 | `NJ_T_001` |
| terminal_params | string | 否 | IOT设备信息。	通过集成IOTSDK的机具发起的交易时传入，取值为IOTSDK生成的业务签名值。 | `{"terminalType":"IOT","signature":"EXXXX","apdidToken":"iBfdgYbXXX","hardToken":"06014698AEFXXX","time":"1533061133","bizCode":"11002200020","bizTid":"0100200mWXXX","signedKeys":"authCode,totalAmount,apdidToken,hardToken,time,bizCode,bizTid"}` |
| time_expire | string | 否 | 订单绝对超时时间。	格式为yyyy-MM-dd HH:mm:ss。超时时间范围：1m~15d。	注：time_expire和timeout_express两者只需传入一个或者都不传，如果两者都传，优先使用time_expire。 | `2021-12-31 10:05:00` |
| timeout_express | string | 否 | 订单相对超时时间。从交易创建时间开始计算。		该笔订单允许的最晚付款时间，逾期将关闭交易。取值范围：1m～15d。m-分钟，h-小时，d-天，1c-当天（1c-当天的情况下，无论交易何时创建，都在0点关闭）。 该参数数值不接受小数点， 如 1.5h，可转换为 90m。		当面付场景默认值为3h；		其它场景默认值为15d; | `90m` |
| total_amount | string | 否 | 订单总金额。	单位为元，精确到小数点后两位，取值范围：[0.01,100000000] 。 | `88.88` |
| trans_currency | string | 否 | 标价币种,  total_amount 对应的币种单位。支持英镑：GBP、港币：HKD、美元：USD、新加坡元：SGD、日元：JPY、加拿大元：CAD、澳元：AUD、欧元：EUR、新西兰元：NZD、韩元：KRW、泰铢：THB、瑞士法郎：CHF、瑞典克朗：SEK、丹麦克朗：DKK、挪威克朗：NOK、马来西亚林吉特：MYR、印尼卢比：IDR、菲律宾比索：PHP、毛里求斯卢比：MUR、以色列新谢克尔：ILS、斯里兰卡卢比：LKR、俄罗斯卢布：RUB、阿联酋迪拉姆：AED、捷克克朗：CZK、南非兰特：ZAR、人民币：CNY | `USD` |
| undiscountable_amount | string | 否 | 不可打折金额。	不参与优惠计算的金额，单位为元，精确到小数点后两位，取值范围[0.01,100000000]。 	如果同时传入了【可打折金额】、【不可打折金额】和【订单总金额】，则必须满足如下条件：【订单总金额】=【可打折金额】+【不可打折金额】。	如果订单金额全部参与优惠计算，则【可打折金额】和【不可打折金额】都无需传入。 | `8.88` |

## 返回结果

- **Content-Type**：`application/json`

### 返回参数

| 字段名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| advance_amount | string | 先享后付2.0垫资金额,不返回表示没有走垫资，非空表示垫资支付的金额 | `88.8` |
| async_pay_apply_status | string | 异步支付受理状态，仅异步支付模式且query_options指定async_pay_info时返回。S：受理成功，支付宝内部会在一定期限内捞起任务推进支付，直到支付成功或超出可重试期限；其它：受理结果未知，可通过查询接口获取交易状态。 | `S` |
| async_payment_mode | string | 异步支付模式，目前有五种值：	ASYNC_DELAY_PAY(异步延时付款);	ASYNC_REALTIME_PAY(异步准实时付款);	SYNC_DIRECT_PAY(同步直接扣款);	NORMAL_ASYNC_PAY(纯异步付款);	QUOTA_OCCUPYIED_ASYNC_PAY(异步支付并且预占了先享后付额度); | `SYNC_DIRECT_PAY` |
| auth_trade_pay_mode | string | 预授权支付模式，该参数仅在信用预授权支付场景下返回。信用预授权支付：CREDIT_PREAUTH_PAY | `CREDIT_PREAUTH_PAY` |
| bkagent_resp_info.bindclrissr_id | string | 枚举值，01 银联；02 网联；03 连通等 | `` |
| bkagent_resp_info.bindpyeracctbk_id | string | 付款机构在清算组织登记或分配的机构代码 | `` |
| bkagent_resp_info.bindtrx_id | string | 原快捷交易流水号 | `` |
| bkagent_resp_info.bkpyeruser_code | string | 用户在银行付款账号的标记化处理编号 | `` |
| bkagent_resp_info.estter_location | string | 设备推测位置 | `` |
| business_params | string | 商户传入业务信息，具体值要和支付宝约定	将商户传入信息分发给相应系统，应用于安全，营销等参数直传场景	格式为json格式 | `{"data":"123"}` |
| buyer_logon_id | string | 买家支付宝账号 | `159****5620` |
| buyer_open_id | string | 买家支付宝用户唯一标识 | `074a1CcTG1LelxKe4xQC0zgNdId0nxi95b5lsNpazWYoCo5` |
| buyer_pay_amount | string | 买家付款的金额 | `8.88` |
| buyer_user_id | string | 买家在支付宝的用户id | `2088101117955611` |
| buyer_user_name | string | 买家名称；	买家为个人用户时为买家姓名，买家为企业用户时为企业名称；	默认不返回该信息，需与支付宝约定后配置返回； | `菜鸟网络有限公司` |
| buyer_user_type | string | 买家用户类型。 | `PRIVATE` |
| can_turn_to_app_pay | string | 是否可以转为app支付，仅当商户代扣失败场景才会返回该字段信息 | `true` |
| card_balance | string | 支付宝卡余额 | `98.23` |
| charge_amount | string | 该笔交易针对收款方的收费金额；	只在机构间联模式下返回，其它场景下不返回该字段； | `8.88` |
| charge_flags | string | 费率活动标识。	当交易享受特殊行业或活动费率时，返回该场景的标识。具体场景如下：	trade_special_00：订单优惠费率；	industry_special_on_00：线上行业特殊费率0；	industry_special_on_01：线上行业特殊费率1；	industry_special_00：线下行业特殊费率0；	industry_special_01：线下行业特殊费率1；	bluesea_1：蓝海活动优惠费率标签；	注：只在机构间联模式下返回，其它场景下不返回该字段； | `industry_special_00` |
| charge_info_list.charge_fee | string | 实收费用 | `` |
| charge_info_list.charge_type | string | 收单手续费trade，花呗分期手续hbfq，其他手续费charge | `` |
| charge_info_list.is_rating_on_switch | string | 是否合约指定收费账号出资，值为"Y"或"N" | `` |
| charge_info_list.is_rating_on_trade_receiver | string | 是否收款账号出资，值为"Y"或"N" | `` |
| charge_info_list.original_charge_fee | string | 原始费用 | `` |
| charge_info_list.sub_fee_detail_list | array | 组合支付收费明细 | `` |
| charge_info_list.switch_fee_rate | string | 签约费率 | `` |
| credit_biz_order_id | string | 信用业务单号。信用支付场景才有值。先用后付产品里是芝麻订单号。 | `ZMCB99202103310000450000041833` |
| credit_pay_mode | string | 信用支付模式。表示订单是采用信用支付方式（支付时买家没有出资，需要后续履约）。"creditAdvanceV2"表示芝麻先用后付模式，用户后续需要履约扣款。 此字段只有信用支付场景才有值，商户需要根据字段值单独处理。此字段以后可能扩展其他值，建议商户使用白名单方式识别，对于未识别的值做失败处理，并联系支付宝技术支持人员。 | `creditAdvanceV2` |
| discount_amount | string | 平台优惠金额 | `88.88` |
| discount_goods_detail | string | 本次交易支付所使用的单品券优惠的商品优惠信息。	只有在query_options中指定时才返回该字段信息。 | `[{"goods_id":"STANDARD1026181538","goods_name":"雪碧","discount_amount":"100.00","voucher_id":"2015102600073002039000002D5O"}]` |
| enterprise_pay_info.biz_info | string | 因公付业务信息 | `` |
| enterprise_pay_info.invoice_amount | string | 开票金额 | `` |
| enterprise_pay_info.is_use_enterprise_pay | boolean | 是否包含因公付资产 | `` |
| fund_bill_list | array | 交易支付使用的资金渠道。	只有在签约中指定需要返回资金明细，或者入参的query_options中指定时才返回该字段信息。 | `` |
| gmt_payment | string | 交易支付时间 | `2014-11-27 15:45:57` |
| hyb_amount | string | 惠营宝回票金额 | `10.24` |
| invoice_amount | string | 交易中可给用户开具发票的金额 | `12.50` |
| mdiscount_amount | string | 商家优惠金额 | `88.88` |
| open_id | string | 买家支付宝用户号,该参数已废弃，请不要使用 | `2088102122524333` |
| out_trade_no | string | 商户订单号 | `6823789339978248` |
| pay_amount | string | 支付币种订单金额 | `580.04` |
| pay_currency | string | 支付币种 | `CNY` |
| point_amount | string | 使用集分宝付款的金额 | `8.12` |
| pre_auth_pay_amount | string | 当用户使用芝麻信用先享后付时，会返回该字段，代表整笔交易的原始待履约金额，单位元。 | `12.45` |
| receipt_amount | string | 实收金额 | `88.88` |
| receipt_currency_type | string | 收款资金类型，当交易收款资金为数字人民币时返回值为“DC”，否则不返回该字段。 | `DC` |
| settle_amount | string | 结算币种订单金额 | `88.88` |
| settle_currency | string | 商户指定的结算币种，目前支持英镑：GBP、港币：HKD、美元：USD、新加坡元：SGD、日元：JPY、加拿大元：CAD、澳元：AUD、欧元：EUR、新西兰元：NZD、韩元：KRW、泰铢：THB、瑞士法郎：CHF、瑞典克朗：SEK、丹麦克朗：DKK、挪威克朗：NOK、马来西亚林吉特：MYR、印尼卢比：IDR、菲律宾比索：PHP、毛里求斯卢比：MUR、以色列新谢克尔：ILS、斯里兰卡卢比：LKR、俄罗斯卢布：RUB、阿联酋迪拉姆：AED、捷克克朗：CZK、南非兰特：ZAR、人民币：CNY | `USD` |
| settle_trans_rate | string | 结算币种兑换标价币种汇率 | `1` |
| settlement_id | string | 支付清算编号，用于清算对账使用；	只在机构间联模式下返回，其它场景下不返回该字段； | `2018101610032004620239146945` |
| store_name | string | 发生支付交易的商户门店名称 | `证大五道口店` |
| tap_pay_info.payment_medium_type | string | 碰一下支付的支付介质类型，标识当前支付为碰一下支付 | `` |
| tap_pay_info.total_discount_amount | string | 碰一下支付的碰一下共减优惠金额 | `` |
| tap_pay_info.total_discount_name | string | 碰一下支付的碰一下共减金额展示名称 | `` |
| total_amount | string | 交易金额 | `120.88` |
| trade_no | string | 支付宝交易号 | `2013112011001004330000121536` |
| trans_currency | string | 标价币种, total_amount对应的币种单位。目前支持英镑：GBP、港币：HKD、美元：USD、新加坡元：SGD、日元：JPY、加拿大元：CAD、澳元：AUD、欧元：EUR、新西兰元：NZD、韩元：KRW、泰铢：THB、瑞士法郎：CHF、瑞典克朗：SEK、丹麦克朗：DKK、挪威克朗：NOK、马来西亚林吉特：MYR、印尼卢比：IDR、菲律宾比索：PHP、毛里求斯卢比：MUR、以色列新谢克尔：ILS、斯里兰卡卢比：LKR、俄罗斯卢布：RUB、阿联酋迪拉姆：AED、捷克克朗：CZK、南非兰特：ZAR、人民币：CNY | `USD` |
| trans_pay_rate | string | 标价币种兑换支付币种汇率 | `6.5261` |
| voucher_detail_list | array | 本交易支付时使用的所有优惠券信息。	只有在query_options中指定时才返回该字段信息。 | `` |

### 成功响应示例

```json
{
  "code": "10000",
  "msg": "Success",
  "advance_amount": "88.8",
  "async_pay_apply_status": "S",
  "async_payment_mode": "SYNC_DIRECT_PAY",
  "auth_trade_pay_mode": "CREDIT_PREAUTH_PAY",
  "bkagent_resp_info": {
    "bindclrissr_id": "string",
    "bindpyeracctbk_id": "string",
    "bindtrx_id": "string",
    "bkpyeruser_code": "string",
    "estter_location": "string"
  },
  "business_params": "{\"data\":\"123\"}",
  "buyer_logon_id": "159****5620",
  "buyer_open_id": "074a1CcTG1LelxKe4xQC0zgNdId0nxi95b5lsNpazWYoCo5",
  "buyer_pay_amount": "8.88",
  "buyer_user_id": "2088101117955611",
  "buyer_user_name": "菜鸟网络有限公司",
  "buyer_user_type": "PRIVATE",
  "can_turn_to_app_pay": "true",
  "card_balance": "98.23",
  "charge_amount": "8.88",
  "charge_flags": "industry_special_00",
  "charge_info_list": {
    "charge_fee": "string",
    "charge_type": "string",
    "is_rating_on_switch": "string",
    "is_rating_on_trade_receiver": "string",
    "original_charge_fee": "string",
    "sub_fee_detail_list": [
      {
        "charge_fee": "string",
        "original_charge_fee": "string",
        "switch_fee_rate": "string"
      }
    ],
    "switch_fee_rate": "string"
  },
  "credit_biz_order_id": "ZMCB99202103310000450000041833",
  "credit_pay_mode": "creditAdvanceV2",
  "discount_amount": "88.88",
  "discount_goods_detail": "[{\"goods_id\":\"STANDARD1026181538\",\"goods_name\":\"雪碧\",\"discount_amount\":\"100.00\",\"voucher_id\":\"2015102600073002039000002D5O\"}]",
  "enterprise_pay_info": {
    "biz_info": "string",
    "invoice_amount": "string",
    "is_use_enterprise_pay": "boolean"
  },
  "fund_bill_list": [
    {
      "amount": "string",
      "bank_code": "string",
      "fund_channel": "string",
      "fund_type": "string",
      "real_amount": "string"
    }
  ],
  "gmt_payment": "2014-11-27 15:45:57",
  "hyb_amount": "10.24",
  "invoice_amount": "12.50",
  "mdiscount_amount": "88.88",
  "open_id": "2088102122524333",
  "out_trade_no": "6823789339978248",
  "pay_amount": "580.04",
  "pay_currency": "CNY",
  "point_amount": "8.12",
  "pre_auth_pay_amount": "12.45",
  "receipt_amount": "88.88",
  "receipt_currency_type": "DC",
  "settle_amount": "88.88",
  "settle_currency": "USD",
  "settle_trans_rate": "1",
  "settlement_id": "2018101610032004620239146945",
  "store_name": "证大五道口店",
  "tap_pay_info": {
    "payment_medium_type": "string",
    "total_discount_amount": "string",
    "total_discount_name": "string"
  },
  "total_amount": "120.88",
  "trade_no": "2013112011001004330000121536",
  "trans_currency": "USD",
  "trans_pay_rate": "6.5261",
  "voucher_detail_list": [
    {
      "amount": "string",
      "id": "string",
      "memo": "string",
      "merchant_contribute": "string",
      "name": "string",
      "other_contribute": "string",
      "other_contribute_detail": [
        {
          "contribute_amount": "string",
          "contribute_type": "string"
        }
      ],
      "purchase_ant_contribute": "string",
      "purchase_buyer_contribute": "string",
      "purchase_merchant_contribute": "string",
      "template_id": "string",
      "type": "string"
    }
  ]
}
```

### 失败响应示例

```json
{
  "code": "40004",
  "msg": "Business Failed",
  "sub_code": "ACQ.TRADE_HAS_SUCCESS",
  "sub_msg": "交易已被支付"
}
```

## 状态码说明

| 状态码 | 说明 |
|--------|------|
| 10000  | 业务处理成功 |
| 40004  | 业务处理失败 |
| 20000  | 服务不可用 |

## 请求示例 (cURL)

```bash
curl -X POST https://openapi.alipay.com/v3/alipay/trade/pay \
  -H "Content-Type: application/json" \
  -d '{
  "advance_payment_type": "ENJOY_PAY_V2",
  "agreement_params": {
    "agreement_no": "20170322450983769228",
    "apply_token": "MDEDUCT0068292ca377d1d44b65fa24ec9cd89132f",
    "auth_confirm_no": "423979",
    "deduct_permission": "2021571176714791277815457854545"
  },
  "alipay_store_id": "2016041400077000000003314986",
  "auth_code": "28763443825664394",
  "auth_confirm_mode": "COMPLETE",
  "auth_no": "2016110310002001760201905725",
  "bkagent_req_info": {
    "acq_code": "string",
    "device_type": "string",
    "location": "string",
    "merch_code": "string",
    "serial_num": "string"
  },
  "body": "Iphone6 16G",
  "business_params": {
    "actual_order_time": "string",
    "buyer_memo": "string",
    "campus_card": "string",
    "card_type": "string",
    "enterprise_pay_amount": "string",
    "enterprise_pay_info": "string",
    "force_pwd": "string",
    "good_taxes": "string",
    "mc_create_trade_ip": "string",
    "priority_unfreeze_asset": "string",
    "tiny_app_merchant_biz_type": "string"
  },
  "buyer_id": "2088202954065786",
  "buyer_open_id": "074a1CcTG1LelxKe4xQC0zgNdId0nxi95b5lsNpazWYoCo5",
  "disable_pay_channels": "credit_group",
  "discountable_amount": "80.00",
  "ext_user_info": {
    "cert_no": "string",
    "cert_type": "string",
    "fix_buyer": "string",
    "identity_hash": "string",
    "min_age": "string",
    "mobile": "string",
    "name": "string",
    "need_check_info": "string"
  },
  "extend_params": {
    "card_type": "string",
    "credit_ext_info": "string",
    "hb_fq_num": "string",
    "hb_fq_seller_percent": "string",
    "industry_reflux_info": "string",
    "royalty_freeze": "string",
    "specified_seller_name": "string",
    "sys_service_provider_id": "string",
    "tc_installment_order_id": "string",
    "trade_component_order_id": "string"
  },
  "goods_detail": [
    {
      "alipay_goods_id": "string",
      "body": "string",
      "categories_tree": "string",
      "goods_category": "string",
      "goods_id": "string",
      "goods_name": "string",
      "out_item_id": "string",
      "out_sku_id": "string",
      "price": "string",
      "quantity": "integer",
      "show_url": "string"
    }
  ],
  "is_async_pay": "false",
  "merchant_order_no": "201008123456789",
  "notify_url": "string",
  "operator_id": "yx_001",
  "out_trade_no": "20150320010101001",
  "passback_params": "merchantBizType%3d3C%26merchantBizNo%3d2016010101111",
  "pay_params": {
    "async_type": "NORMAL_ASYNC",
    "retry_type": "NONE"
  },
  "product_code": "FACE_TO_FACE_PAYMENT",
  "promo_params": {
    "actual_order_time": "2018-09-25 22:47:33"
  },
  "query_options": [
    "string"
  ],
  "request_org_pid": "2088201916734621",
  "royalty_info": {
    "royalty_detail_infos": [
      {
        "amount": "string",
        "amount_percentage": "string",
        "batch_no": "string",
        "desc": "string",
        "out_relation_id": "string",
        "serial_no": "integer",
        "trans_in": "string",
        "trans_in_type": "string",
        "trans_out": "string",
        "trans_out_type": "string"
      }
    ],
    "royalty_type": "string"
  },
  "scene": "bar_code",
  "seller_id": "2088102146225135",
  "settle_currency": "USD",
  "settle_info": {
    "settle_detail_infos": [
      {
        "actual_amount": "string",
        "amount": "string",
        "settle_entity_id": "string",
        "settle_entity_type": "string",
        "summary_dimension": "string",
        "trans_in": "string",
        "trans_in_type": "string"
      }
    ],
    "settle_period_time": "string"
  },
  "store_id": "NJ_001",
  "sub_merchant": {
    "merchant_id": "string",
    "merchant_type": "string"
  },
  "subject": "Iphone6 16G",
  "terminal_id": "NJ_T_001",
  "terminal_params": "{\"terminalType\":\"IOT\",\"signature\":\"EXXXX\",\"apdidToken\":\"iBfdgYbXXX\",\"hardToken\":\"06014698AEFXXX\",\"time\":\"1533061133\",\"bizCode\":\"11002200020\",\"bizTid\":\"0100200mWXXX\",\"signedKeys\":\"authCode,totalAmount,apdidToken,hardToken,time,bizCode,bizTid\"}",
  "time_expire": "2021-12-31 10:05:00",
  "timeout_express": "90m",
  "total_amount": "88.88",
  "trans_currency": "USD",
  "undiscountable_amount": "8.88"
}'
```
