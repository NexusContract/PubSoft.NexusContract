# ADR-010 BFF/HttpApi 职责解耦

**状态**: 提议
**日期**: 2026-01-11
**决策者**: 架构组
**相关**: `ADR-010.md`

---

## 1. 上下文 (Context)
- **现状**: BFF 与 HttpApi 在职责与信任边界上存在重叠实施。
- **痛点**: 权限决策与执行逻辑耦合，影响隔离与安全边界。

## 2. 决策 (Decision)
- **核心逻辑**: 明确定义：BFF 负责 Map 层（鉴权与路由决策）；HttpApi 负责 Inst/Pool 层（受信任执行与状态管理）。
- **职责边界**: 禁止在 BFF 中直接操作执行态资源；HttpApi 假定已通过 BFF 验证的请求可执行受信任逻辑。

## 3. 理由 (Rationale)
- **业务收益**: 提高隔离性、减少联动故障面。
- **技术权衡**: 需要请求头/上下文传递表述接口（短协议约定）。

## 4. 影响与约束 (Impact)
- **副作用**: 需要在两层间明确传输协议与审计链路。
- **容错底线**: 若 BFF 无法提供完整鉴权信息，HttpApi 应拒绝或采用最小权限策略。
